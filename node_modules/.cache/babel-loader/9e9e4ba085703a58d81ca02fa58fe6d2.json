{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/USER/Desktop/REACT PROJECT/wether-app-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/USER/Desktop/REACT PROJECT/wether-app-pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{GET_WEATHER,SET_ERROR,SET_LOADING}from'../types';var API_KEY='b1507074fdbc577d3d97b9b997f3827e';export var getWeather=function getWeather(city){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res,_resData,resData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"https://api.openweathermap.org/data/2.5/weather?q=\".concat(city,\"&appid=\").concat(API_KEY));case 3:res=_context.sent;if(res.ok){_context.next=9;break;}_context.next=7;return res.json();case 7:_resData=_context.sent;throw new Error(_resData.message);case 9:_context.next=11;return res.json();case 11:resData=_context.sent;dispatch({type:GET_WEATHER,payload:resData});_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);dispatch({type:SET_ERROR,payload:_context.t0.message});case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var setLoading=function setLoading(){return{type:SET_LOADING};};export var setError=function setError(){return{type:SET_ERROR,payload:''};};","map":{"version":3,"sources":["C:/Users/USER/Desktop/REACT PROJECT/wether-app-pwa/src/store/actions/weatherActions.ts"],"names":["GET_WEATHER","SET_ERROR","SET_LOADING","API_KEY","getWeather","city","dispatch","fetch","res","ok","json","resData","Error","message","type","payload","setLoading","setError"],"mappings":"+UAEA,OAASA,WAAT,CAAsBC,SAAtB,CAAiCC,WAAjC,KAA8F,UAA9F,CAEA,GAAMC,CAAAA,OAAO,CAAG,kCAAhB,CAEA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,IAAD,CAAqE,CAC7F,+FAAO,iBAAMC,QAAN,iLAEeC,CAAAA,KAAK,6DAAsDF,IAAtD,mBAAoEF,OAApE,EAFpB,QAEGK,GAFH,kBAICA,GAAG,CAACC,EAJL,+CAKmCD,CAAAA,GAAG,CAACE,IAAJ,EALnC,QAKKC,QALL,oBAMK,IAAIC,CAAAA,KAAJ,CAAUD,QAAO,CAACE,OAAlB,CANL,+BASgCL,CAAAA,GAAG,CAACE,IAAJ,EAThC,SASGC,OATH,eAUHL,QAAQ,CAAC,CACPQ,IAAI,CAAEd,WADC,CAEPe,OAAO,CAAEJ,OAFF,CAAD,CAAR,CAVG,iFAeHL,QAAQ,CAAC,CACPQ,IAAI,CAAEb,SADC,CAEPc,OAAO,CAAE,YAAIF,OAFN,CAAD,CAAR,CAfG,qEAAP,+DAqBD,CAtBM,CAwBP,MAAO,IAAMG,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAqB,CAC7C,MAAO,CACLF,IAAI,CAAEZ,WADD,CAAP,CAGD,CAJM,CAMP,MAAO,IAAMe,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAqB,CAC3C,MAAO,CACLH,IAAI,CAAEb,SADD,CAELc,OAAO,CAAE,EAFJ,CAAP,CAID,CALM","sourcesContent":["import { ThunkAction } from 'redux-thunk';\r\nimport { RootState } from '../index';\r\nimport { GET_WEATHER, SET_ERROR, SET_LOADING, WeatherAction, WeatherData, WeatherError } from '../types';\r\n\r\nconst API_KEY = 'b1507074fdbc577d3d97b9b997f3827e';\r\n\r\nexport const getWeather = (city: string): ThunkAction<void, RootState, null, WeatherAction> => {\r\n  return async dispatch => {\r\n    try {\r\n      const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}`);\r\n\r\n      if(!res.ok) {\r\n        const resData: WeatherError = await res.json();\r\n        throw new Error(resData.message);\r\n      }\r\n\r\n      const resData: WeatherData = await res.json();\r\n      dispatch({\r\n        type: GET_WEATHER,\r\n        payload: resData\r\n      });\r\n    }catch(err) {\r\n      dispatch({\r\n        type: SET_ERROR,\r\n        payload: err.message\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport const setLoading = (): WeatherAction => {\r\n  return {\r\n    type: SET_LOADING\r\n  }\r\n}\r\n\r\nexport const setError = (): WeatherAction => {\r\n  return {\r\n    type: SET_ERROR,\r\n    payload: ''\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}